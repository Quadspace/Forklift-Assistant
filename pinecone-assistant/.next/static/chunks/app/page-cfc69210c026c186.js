(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4840:function(e,t,a){Promise.resolve().then(a.bind(a,2621))},2621:function(e,t,a){"use strict";a.d(t,{default:function(){return x}});var r=a(7437),n=a(2265),s=a(9882);a(3079);var l=(0,a(2119).$)("9d5db9e1e460311b2c3d9cfbae71a1c8b2354b6e"),o=a(6202);function i(e){let{files:t,referencedFiles:a}=e,[s,l]=(0,n.useState)(!0),o=e=>{if(0===e)return"0 Byte";let t=parseInt(Math.floor(Math.log(e)/Math.log(1024)).toString());return Math.round(e/Math.pow(1024,t))+" "+["Bytes","KB","MB","GB","TB"][t]},i=e=>a.some(t=>e.name.toLowerCase().includes(t.name.toLowerCase())||t.name.toLowerCase().includes(e.name.toLowerCase()));return(0,r.jsxs)("div",{className:"w-full mt-4 bg-white dark:bg-gray-800 shadow-md rounded-lg overflow-hidden",children:[(0,r.jsxs)("button",{className:"w-full flex justify-between items-center p-4 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",onClick:()=>l(!s),children:[(0,r.jsx)("span",{className:"font-semibold text-gray-800 dark:text-gray-200",children:"Assistant Files"}),(0,r.jsx)("span",{className:"text-xl text-gray-600 dark:text-gray-300",children:s?"▲":"▼"})]}),s&&(0,r.jsx)("div",{className:"p-4",children:(0,r.jsx)("div",{className:"flex flex-wrap -mx-2",children:t.map(e=>(0,r.jsx)("div",{className:"w-full sm:w-1/2 md:w-1/3 px-2 mb-4 relative",children:(0,r.jsxs)("div",{className:"bg-gray-100 dark:bg-gray-700 p-4 rounded-lg ".concat(i(e)?"border-2 border-blue-500 dark:border-blue-400":""),children:[(0,r.jsx)("h3",{className:"font-semibold truncate text-gray-800 dark:text-gray-200",children:e.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Size: ",o(e.size)]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Created: ",new Date(e.created_at).toLocaleDateString()]}),i(e)&&(0,r.jsx)("span",{className:"absolute top-2 right-2 bg-blue-500 dark:bg-blue-400 text-white text-xs px-2 py-1 rounded",children:"Referenced"})]})},e.id))})})]})}var c=a(9360);let d=[{regex:/(pp?\.?\s*(\d+)(?:\s*-\s*(\d+))?)|(?:pages?\s+(\d+)(?:\s*-\s*(\d+))?)/gi,extractPages:e=>{let t=e[2]||e[4]||"1",a=e[3]||e[5]||t;return{startPage:parseInt(t,10),endPage:parseInt(a,10),fullMatch:e[0]}}},{regex:/(WP\s+\d+)(?:.*?)(?:p\.?\s*(\d+)(?:\s*-\s*(\d+))?)/gi,extractPages:e=>{let t=e[2]||"1",a=e[3]||t;return{startPage:parseInt(t,10),endPage:parseInt(a,10),fullMatch:e[0],documentRef:e[1]}}},{regex:/\[(\d+),\s*pp?\.?\s*(\d+)(?:\s*-\s*(\d+))?\]/gi,extractPages:e=>{let t=e[1],a=e[2],r=e[3]||a;return{startPage:parseInt(a,10),endPage:parseInt(r,10),fullMatch:e[0],documentRef:"Reference ".concat(t)}}},{regex:/\[(\d+),\s+pp\.\s+(\d+)(?:\s*-\s*(\d+))?\]/gi,extractPages:e=>{let t=e[1],a=e[2],r=e[3]||a;return{startPage:parseInt(a,10),endPage:parseInt(r,10),fullMatch:e[0],documentRef:"Reference ".concat(t)}}},{regex:/\[(\d+)\]\s+pp?\.?\s*(\d+)(?:\s*-\s*(\d+))?/gi,extractPages:e=>{let t=e[1],a=e[2],r=e[3]||a;return{startPage:parseInt(a,10),endPage:parseInt(r,10),fullMatch:e[0],documentRef:"Reference ".concat(t)}}},{regex:/\[(\d+)\](?!\s*\()/g,extractPages:e=>{let t=e[1];return{startPage:1,endPage:1,fullMatch:e[0],documentRef:"Reference ".concat(t)}}},{regex:/\[(\d+)\]\s*\(pp?\.?\s*(\d+)(?:\s*-\s*(\d+))?\)/gi,extractPages:e=>{let t=e[1],a=e[2],r=e[3]||a;return{startPage:parseInt(a,10),endPage:parseInt(r,10),fullMatch:e[0],documentRef:"Reference ".concat(t)}}}];var g=a(166),u=a(6896);let h=(0,g.default)(()=>a.e(618).then(a.bind(a,618)).then(e=>({default:e.Document})),{loadableGenerated:{webpack:()=>[null]},ssr:!1}),m=(0,g.default)(()=>a.e(618).then(a.bind(a,618)).then(e=>({default:e.Page})),{loadableGenerated:{webpack:()=>[null]},ssr:!1});function f(e){let{isOpen:t,onClose:a,pdfUrl:s,fileName:l,startPage:o,endPage:i,searchText:c}=e,[d,g]=(0,n.useState)(null),[u,f]=(0,n.useState)(o||1),[x,p]=(0,n.useState)(null),[b,v]=(0,n.useState)(!0),[w,j]=(0,n.useState)(null),[y,N]=(0,n.useState)(""),[k,P]=(0,n.useState)([]),S=(0,n.useRef)(null);return((0,n.useEffect)(()=>{console.log("PDFPreviewModal props received:",{isOpen:t,pdfUrl:s,fileName:l,startPage:o,endPage:i,searchText:c})},[t,s,l,o,i,c]),(0,n.useEffect)(()=>{t&&(console.log("Modal opened, setting current page to ".concat(o||1)),f(o||1),p(null),v(!0),P([]),s||(p("No PDF URL provided"),v(!1)))},[t,o,s]),(0,n.useEffect)(()=>{(async()=>{if(w&&c&&!b)try{let e=await w.getPage(u),t=await e.getTextContent(),a=t.items.map(e=>e.str).join(" ");if(N(a),console.log('Searching for text "'.concat(c,'" in current page text:'),a.substring(0,200)+"..."),c&&a.includes(c)){console.log('Found search text "'.concat(c,'" in page ').concat(u));let a=e.getViewport({scale:1}),r=[];for(let e=0;e<t.items.length;e++){let n=t.items[e];if(n.str.includes(c)){let e={left:n.transform[4],top:n.transform[5],width:n.width,height:n.height};r.push({rect:e,viewport:a}),console.log('Added highlight for "'.concat(n.str,'" at position:'),e)}}P(r),console.log("Created ".concat(r.length," highlight areas"))}else console.log('Search text "'.concat(c,'" not found in page ').concat(u))}catch(e){console.error("Error extracting text:",e)}})()},[w,u,c,b]),t)?(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-75",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-5xl w-11/12 max-h-[90vh] flex flex-col",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-200 truncate",children:l}),(0,r.jsx)("button",{onClick:a,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200","aria-label":"Close",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsxs)("div",{className:"flex-1 overflow-auto p-4 flex flex-col items-center",children:[b&&(0,r.jsx)("div",{className:"flex items-center justify-center h-full w-full",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-900"})}),x&&(0,r.jsx)("div",{className:"text-red-500 text-center p-4",children:x}),!x&&(0,r.jsx)("div",{className:"relative",children:s&&(0,r.jsx)("div",{children:(0,r.jsx)(h,{file:s,onLoadSuccess:e=>{console.log("PDF document loaded successfully:",e),g(e.numPages),j(e._pdfInfo.pdfDocument),v(!1)},onLoadError:function(e){console.error("Error loading PDF:",e),p("Failed to load PDF document. Please try again later."),v(!1)},loading:(0,r.jsx)("div",{className:"text-gray-500",children:"Loading PDF..."}),children:(0,r.jsxs)("div",{ref:S,className:"relative",children:[(0,r.jsx)(m,{pageNumber:u,renderTextLayer:!0,renderAnnotationLayer:!0,className:"pdf-page",width:Math.min(.8*window.innerWidth,900)}),k.length>0&&(0,r.jsx)("div",{className:"absolute top-0 left-0 w-full h-full pointer-events-none",children:k.map((e,t)=>{let{rect:a}=e;return(0,r.jsx)("div",{className:"absolute bg-yellow-300 bg-opacity-50 dark:bg-yellow-600 dark:bg-opacity-50",style:{left:"".concat(a.left,"px"),top:"".concat(a.top,"px"),width:"".concat(a.width,"px"),height:"".concat(a.height,"px"),transform:"scale(1.5)",transformOrigin:"0 0"}},"highlight-".concat(t))})})]})})})})]}),(0,r.jsxs)("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[(0,r.jsx)("div",{className:"text-gray-700 dark:text-gray-300",children:i&&i>o?"Page ".concat(u," (Showing range: ").concat(o,"-").concat(i,")"):"Page ".concat(u," of ").concat(d||"?")}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{onClick:function(){f(e=>Math.max(1,e-1)),P([])},disabled:u<=1,className:"px-3 py-1 rounded ".concat(u<=1?"bg-gray-200 text-gray-500 dark:bg-gray-700 dark:text-gray-500 cursor-not-allowed":"bg-indigo-500 text-white hover:bg-indigo-600"),children:"Previous"}),(0,r.jsx)("button",{onClick:function(){d&&(f(e=>Math.min(d,e+1)),P([]))},disabled:null!==d&&u>=d,className:"px-3 py-1 rounded ".concat(null!==d&&u>=d?"bg-gray-200 text-gray-500 dark:bg-gray-700 dark:text-gray-500 cursor-not-allowed":"bg-indigo-500 text-white hover:bg-indigo-600"),children:"Next"})]})]})]})}):null}function x(e){let{initialShowAssistantFiles:t,showCitations:a}=e,[g,u]=(0,n.useState)(!0),[h,m]=(0,n.useState)(!1),[x,p]=(0,n.useState)(""),[b,v]=(0,n.useState)(""),[w,j]=(0,n.useState)(""),[y,N]=(0,n.useState)([]),[k,P]=(0,n.useState)(t);(0,n.useRef)(null),(0,n.useRef)(null);let[S,D]=(0,n.useState)([]),[I,C]=(0,n.useState)(!1),[E,M]=(0,n.useState)([]),[R,A]=(0,n.useState)(!1),L=(0,n.useRef)(null),[T,F]=(0,n.useState)({isOpen:!1,pdfUrl:"",fileName:"",startPage:1,endPage:void 0,searchText:void 0}),_=(0,n.useCallback)(()=>{L.current&&clearTimeout(L.current),L.current=setTimeout(()=>{let e=document.getElementById("chat-container");if(e){let t=e.scrollTop,a=e.scrollHeight;(a-t-e.clientHeight<100||S.length<=2)&&(e.scrollTop=a)}},100)},[S.length]);(0,n.useEffect)(()=>()=>{L.current&&clearTimeout(L.current)},[]),(0,n.useEffect)(()=>{_()},[S,_]),(0,n.useEffect)(()=>{let e=document.getElementById("chat-container");if(e){let t=e=>{e.stopPropagation()};return e.addEventListener("scroll",t),()=>{e.removeEventListener("scroll",t)}}},[]),(0,n.useEffect)(()=>{{let e="true"===localStorage.getItem("darkMode");A(e),e&&document.documentElement.classList.add("dark")}},[]);let O=e=>{let t=[],a=e.match(/([^:\n]+\.[a-zA-Z0-9]+)/g);return a&&a.forEach(e=>{t.push({name:e.trim()})}),t};(0,n.useEffect)(()=>{z(),B()},[]);let B=async()=>{try{let e=await fetch("/api/files"),t=await e.json();"success"===t.status?M(t.files):console.error("Error fetching files:",t.message)}catch(e){console.error("Error fetching files:",e)}},z=async()=>{try{let e=await fetch("/api/assistants"),t=await e.json();u(!1),m(t.exists),j(t.assistant_name),t.exists||p("Please create an Assistant")}catch(e){u(!1),p("Error connecting to the Assistant")}},U=async()=>{if(!b.trim())return;let e=setTimeout(()=>{console.log("Global timeout reached - forcing streaming state reset"),C(!1)},6e4),t={id:(0,c.Z)(),role:"user",content:b,timestamp:new Date().toISOString()};D(e=>[...e,t]),v(""),C(!0);try{let{object:e}=await l([t]),o="",i={id:(0,c.Z)(),role:"assistant",content:"",timestamp:new Date().toISOString(),references:[]};D(e=>[...e,i]);let d=null,g=null,u=0,h=()=>{d&&clearTimeout(d),d=setTimeout(()=>{console.log("Stream timed out - no chunks received for 15 seconds"),C(!1)},15e3)},m=()=>{g&&clearTimeout(g),u>0&&(g=setTimeout(()=>{console.log("Activity stopped after receiving chunks - considering stream complete"),C(!1)},8e3))};h();try{for await(let t of(0,s.mj)(e))try{var a,r,n;h(),m(),u++;let e=JSON.parse(t);if(e&&Array.isArray(e.choices)&&0===e.choices.length){console.log("Stream finished: Received empty choices array."),C(!1);break}if(null==e?void 0:null===(a=e.choices[0])||void 0===a?void 0:a.finish_reason){console.log("Stream finished by assistant with finish_reason:",e.choices[0].finish_reason),C(!1);break}let s=null===(n=e.choices[0])||void 0===n?void 0:null===(r=n.delta)||void 0===r?void 0:r.content;s&&(o+=s,D(e=>{let t=[...e];return t[t.length-1].content=o,t}))}catch(e){console.error("Error parsing chunk:",e)}}catch(e){console.error("Stream processing error:",e),C(!1)}finally{d&&clearTimeout(d),g&&clearTimeout(g),C(!1)}let f=O(o);N(f)}catch(e){console.error("Error in chat:",e),p("An error occurred while chatting.")}finally{clearTimeout(e),C(!1)}},W=(e,t,a,r,n)=>{if(console.log("Opening PDF modal with params:",{pdfUrl:e,fileName:t,startPage:a,endPage:r,searchText:n}),!e){console.error("Cannot open PDF modal: Missing PDF URL");return}if(!t){console.error("Cannot open PDF modal: Missing file name");return}let s=Number.isInteger(a)&&a>0?a:1,l=r&&Number.isInteger(r)&&r>=s?r:void 0;F({isOpen:!0,pdfUrl:e,fileName:t,startPage:s,endPage:l,searchText:n}),console.log("PDF modal state set to:",{isOpen:!0,pdfUrl:e,fileName:t,startPage:s,endPage:l,searchText:n})},G=(e,t)=>{let a;if(!t)return(0,r.jsx)(o.UG,{components:{a:e=>{let{node:t,...a}=e;return(0,r.jsxs)("a",{...a,className:"text-blue-600 dark:text-blue-400 hover:underline",children:["\uD83D\uDD17 ",a.children]})}},children:e});let n=function(e){let t=[];return console.log("Starting detectPageReferences with text:",e.substring(0,100)+"..."),d.forEach((a,r)=>{let n;console.log("Trying pattern #".concat(r,":"),a.regex);let s=new RegExp(a.regex);for(;null!==(n=s.exec(e));){console.log("Pattern #".concat(r," found match:"),n[0]);let e=a.extractPages(n);t.push({startPage:e.startPage,endPage:e.endPage,fullMatch:e.fullMatch,documentRef:"documentRef"in e?e.documentRef:void 0,matchIndex:n.index})}}),console.log("Found ".concat(t.length," references in total")),t.sort((e,t)=>e.matchIndex-t.matchIndex)}(e);if(console.log("Detected PDF references:",n,"in content:",e),console.log("Available files for matching:",E.map(e=>({id:e.id,name:e.name}))),0===n.length)return(0,r.jsx)(o.UG,{components:{a:e=>{let{node:t,...a}=e;return(0,r.jsxs)("a",{...a,className:"text-blue-600 dark:text-blue-400 hover:underline",children:["\uD83D\uDD17 ",a.children]})}},children:e});let s=e;for(let e=n.length-1;e>=0;e--){let t=n[e],a=function(e,t){if(!t||0===t.length){console.log("No files available to match reference:",e);return}if(console.log("Available PDF files:",t.map(e=>e.name)),e.documentRef){let a=e.documentRef.toLowerCase();if(console.log('Trying to match document reference: "'.concat(a,'"')),a.startsWith("reference ")){let e=parseInt(a.replace("reference ",""),10);if(console.log("Trying to match reference ".concat(e," with available files")),!isNaN(e)&&e>0&&t.length>=e){let a=[...t].sort((e,t)=>e.name.localeCompare(t.name));console.log("Sorted files:",a.map(e=>e.name));let r=a[e-1];return console.log("Matched file by reference number: ".concat(r.name)),r}console.log("Reference number ".concat(e," is invalid or out of range"))}let r=t.find(e=>e.name.toLowerCase().includes(a)||a.includes(e.name.toLowerCase().replace(".pdf","")));if(r)return console.log("Matched file by name similarity: ".concat(r.name)),r;console.log('No file matched document reference: "'.concat(a,'"'))}let a=t.filter(e=>e.name.toLowerCase().endsWith(".pdf"));return 1===a.length?(console.log("Only one PDF file available, using it: ".concat(a[0].name)),a[0]):a.length>0&&a.length<5?(console.log("No specific match found, using first PDF as fallback: ".concat(a[0].name)),a[0]):void console.log("No matching file found for reference")}(t,E);if(a){let e=s.substring(0,t.matchIndex),r=s.substring(t.matchIndex+t.fullMatch.length),n="/api/files/".concat(a.id,"/content"),l="PDF: ".concat(a.name," (p. ").concat(t.startPage).concat(t.endPage!==t.startPage?"-".concat(t.endPage):"",")"),o="[".concat(l,"](#pdf-preview?url=").concat(encodeURIComponent(n),"&file=").concat(encodeURIComponent(a.name),"&start=").concat(t.startPage,"&end=").concat(t.endPage||t.startPage,")");s="".concat(e).concat(o).concat(r)}}let l=/\[(\d+)\]/g;for(;null!==(a=l.exec(s));){let e=a[0],t=a[1],r=a.index;if(!s.substring(Math.max(0,r-20),r).includes("](#pdf-preview")&&E.length>=parseInt(t,10)){let a=[...E].sort((e,t)=>e.name.localeCompare(t.name))[parseInt(t,10)-1];if(a){let t="/api/files/".concat(a.id,"/content"),n=s.substring(0,r),o=s.substring(r+e.length),i="PDF: ".concat(a.name),c="[".concat(i,"](#pdf-preview?url=").concat(encodeURIComponent(t),"&file=").concat(encodeURIComponent(a.name),"&start=1)");s="".concat(n).concat(c).concat(o),l.lastIndex=r+c.length}}}return(0,r.jsx)(o.UG,{components:{a:e=>{let{node:t,href:a,...n}=e;if(null==a?void 0:a.startsWith("#pdf-preview")){let e=new URLSearchParams(a.substring(a.indexOf("?"))),t=e.get("url")||"",s=e.get("file")||"",l=parseInt(e.get("start")||"1",10),o=e.has("end")?parseInt(e.get("end")||"1",10):void 0,i=Array.isArray(n.children)?n.children.filter(e=>"string"==typeof e).join(" "):"string"==typeof n.children?n.children:"",c=i.replace(/^PDF:\s*/,"").replace(/\s*\(p\.\s*\d+(?:-\d+)?\)$/,"").replace(/^\[.*\]\s*/,"").trim(),d=i||"PDF: ".concat(s," (p. ").concat(l).concat(o&&o!==l?"-".concat(o):"",")");return(0,r.jsxs)("a",{href:"#",onClick:e=>{e.preventDefault(),W(t,s,l,o,c)},title:"View ".concat(s).concat(l?" (page ".concat(l).concat(o&&o!==l?"-".concat(o):"",")"):""),className:"text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 hover:underline inline-flex items-center bg-indigo-50 dark:bg-indigo-900/30 px-2 py-1 rounded-md border border-indigo-200 dark:border-indigo-700 shadow-sm",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-1 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M9 4.804A7.968 7.968 0 005.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 015.5 14c1.669 0 3.218.51 4.5 1.385A7.962 7.962 0 0114.5 14c1.255 0 2.443.29 3.5.804v-10A7.968 7.968 0 0014.5 4c-1.255 0-2.443.29-3.5.804V12a1 1 0 11-2 0V4.804z"})}),(0,r.jsx)("span",{className:"truncate max-w-[200px]",children:d})]})}return(0,r.jsxs)("a",{...n,href:a,className:"text-blue-600 dark:text-blue-400 hover:underline",children:["\uD83D\uDD17 ",n.children]})}},children:s})};return(0,n.useEffect)(()=>{if(S.length>0){let e=document.getElementById("messages-container");e&&setTimeout(()=>{e.scrollTop=e.scrollHeight},50)}},[S]),(0,r.jsxs)("main",{className:"flex min-h-screen flex-col items-center justify-center p-4 sm:p-8 bg-gray-50 dark:bg-gray-900",children:[(0,r.jsx)("button",{onClick:()=>{A(!R),localStorage.setItem("darkMode",(!R).toString()),document.documentElement.classList.toggle("dark")},className:"absolute top-4 right-4 p-2 rounded-full bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200","aria-label":R?"Switch to light mode":"Switch to dark mode",children:R?(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})}),g?(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-900 mb-4"}),(0,r.jsx)("p",{className:"text-gray-500",children:"Connecting to your Assistant..."})]}):h?(0,r.jsxs)("div",{className:"w-full max-w-6xl xl:max-w-7xl",children:[(0,r.jsxs)("h1",{className:"text-2xl font-bold mb-4 text-indigo-900 dark:text-indigo-100",children:[(0,r.jsx)("a",{href:"https://www.industrialengineer.ai/blog/industrialengineer-ai-assistant/",target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:"Industrial Engineer.ai Assistant"}),": ",w," ",(0,r.jsx)("span",{className:"text-green-500",children:"●"})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)("div",{id:"messages-container",className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-lg mb-4 h-[calc(100vh-300px)] overflow-y-auto overflow-x-hidden",children:S.map((e,t)=>(0,r.jsx)("div",{className:"mb-2 flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,r.jsxs)("div",{className:"flex items-start ".concat("user"===e.role?"flex-row-reverse":"flex-row"),children:[(0,r.jsx)("div",{className:"".concat("user"===e.role?"ml-2":"mr-2"),children:"user"===e.role?(0,r.jsx)("span",{className:"text-2xl",children:"\uD83D\uDC64"}):(0,r.jsx)("a",{href:"https://www.industrialengineer.ai/blog/industrialengineer-ai-assistant/",target:"_blank",rel:"noopener noreferrer",children:(0,r.jsx)("img",{src:"/industrialengineer-ai-logo.png",alt:"Industrial Engineer.ai Assistant",className:"w-6 h-6 rounded-full object-cover"})})}),(0,r.jsxs)("span",{className:"inline-block p-2 rounded-lg ".concat("user"===e.role?"bg-indigo-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"," max-w-[80%] break-words"),children:[G(e.content,"assistant"===e.role),e.references&&a&&(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)("ul",{children:e.references.map((e,t)=>(0,r.jsx)("li",{children:(0,r.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline",children:e.name})},t))})})]})]})},t))}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),U()},className:"flex mb-4",children:[(0,r.jsx)("input",{type:"text",value:b,onChange:e=>v(e.target.value),className:"flex-grow p-2 border rounded-l-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 text-black dark:text-white",placeholder:"Type your message...",disabled:I}),(0,r.jsx)("button",{type:"submit",className:"bg-indigo-500 text-white p-2 rounded-r-lg hover:bg-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-500",disabled:I,children:I?"Streaming...":"Send"})]}),x&&(0,r.jsxs)("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-4 rounded-md shadow-md",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("svg",{className:"h-6 w-6 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),(0,r.jsx)("p",{className:"font-semibold",children:"Error"})]}),(0,r.jsx)("p",{className:"mt-2",children:x})]})]}),k&&(0,r.jsx)("div",{className:"w-full",children:(0,r.jsx)(i,{files:E,referencedFiles:y})})]})]}):(0,r.jsxs)("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-md shadow-md max-w-2xl",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("svg",{className:"h-6 w-6 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),(0,r.jsx)("p",{className:"font-semibold",children:"Error"})]}),(0,r.jsx)("p",{className:"mt-2",children:x}),(0,r.jsxs)("div",{className:"mt-4 text-sm",children:[(0,r.jsx)("p",{className:"font-semibold",children:"To resolve this issue:"}),(0,r.jsxs)("ol",{className:"list-decimal list-inside mt-2 space-y-2",children:[(0,r.jsxs)("li",{children:["Create a Industrial Engineer.ai Assistant at ",(0,r.jsx)("a",{href:"https://app.industrialengineer.ai",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"https://app.industrialengineer.ai"})]}),(0,r.jsxs)("li",{children:["Export the environment variable ",(0,r.jsx)("code",{className:"bg-red-200 px-1 rounded",children:"PINECONE_ASSISTANT_NAME"})," with the value of your assistant's name"]}),(0,r.jsx)("li",{children:"Restart your application"})]})]})]}),(0,r.jsxs)("div",{className:"mt-8 text-sm text-gray-500 flex space-x-4",children:[(0,r.jsx)("a",{href:"https://www.industrialengineer.ai/blog/industrialengineer-ai-assistant/",target:"_blank",rel:"noopener noreferrer",className:"hover:text-indigo-600 transition-colors",children:"ℹ️ What are Industrial Engineer.ai Assistants?"}),(0,r.jsx)("a",{href:"https://app.industrialengineer.ai",target:"_blank",rel:"noopener noreferrer",className:"hover:text-indigo-600 transition-colors",children:"\uD83E\uDD16 Create your own Industrial Engineer.ai Assistant today"})]}),T.isOpen&&(0,r.jsx)(f,{isOpen:T.isOpen,onClose:()=>{F(e=>({...e,isOpen:!1}))},pdfUrl:T.pdfUrl,fileName:T.fileName,startPage:T.startPage,endPage:T.endPage,searchText:T.searchText})]})}u.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(u.version,"/pdf.worker.min.js")}},function(e){e.O(0,[489,302,971,117,744],function(){return e(e.s=4840)}),_N_E=e.O()}]);